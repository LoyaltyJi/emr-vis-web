<!DOCTYPE html>
<!--[if lt IE 7]>      <html lang="en" ng-app="myApp" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html lang="en" ng-app="myApp" class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html lang="en" ng-app="myApp" class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="en" ng-app="myApp" class="no-js"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  <title>EMR VisWeb</title>

  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link rel="stylesheet" href="bower_components/html5-boilerplate/css/normalize.css">
  <link rel="stylesheet" href="bower_components/html5-boilerplate/css/main.css">
  <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap-theme.min.css">
  <link rel="stylesheet" href="css/app.css"/>

  <script src="bower_components/html5-boilerplate/js/vendor/modernizr-2.6.2.min.js"></script>
</head>

<body class="ng-cloak" ng-controller="MainCtrl">

  <!--[if lt IE 7]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
  <![endif]-->
  
  <header class="navbar navbar-default navbar-fixed-top">
    <div class="navbar-header">
      <a class="navbar-brand visible-xs" href="#">EMR VisWeb</a>
    </div>
    <nav class="hidden-xs">
      <ul class="nav navbar-nav">
        <a href="#top" role="button" class="navbar-brand">
          EMR VisWeb
        </a>
        <li><a class="dropdown-toggle" href="#/">DATASET <i class="glyphicon glyphicon-chevron-down"></i></a></li>
        <li><a class="dropdown-toggle" href="#/">MODEL <i class="glyphicon glyphicon-chevron-down"></i></a></li>
      </ul>
      <form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input class="form-control" type="search" ng-model="searchQuery" placeholder="Filter doc #" /><span id="searchclear" class="searchclear glyphicon glyphicon-remove-circle" ng-click="searchQuery = ''"></span>
        </div>
      </form>
    </nav>
  </header>

<!-- Main container starts here. -->

  <div class="container-fluid">
      <div class="row">
        <div class="sidebar">
          <div id="sidebar-resize-indicator"></div>
          <div id="sidebar-top" class="unselectable">
            <div id="tablecontainer">
              <div id="topbar">
                <div class="colname cellwidth_id"><a href="#" class="rotate" tooltip-placement="right" tooltip="document identifier"><div>doc #</div></a></div>
                <div class="colname cellwidth_var"><a class="rotate" tooltip-placement="right" tooltip="any adenoma"><div>any-adenoma</div></a></div>
                <div class="colname cellwidth_var"><a class="rotate" tooltip-placement="right" tooltip="appendiceal orifice"><div>appendiceal-orifice</div></a></div>
                <div class="colname cellwidth_var"><a class="rotate" tooltip-placement="right" tooltip="asa"><div>asa</div></a></div>
                <div class="colname cellwidth_var"><a class="rotate" tooltip-placement="right" tooltip="biopsy"><div>biopsy</div></a></div>
                <div class="colname cellwidth_var"><a class="rotate" tooltip-placement="right" tooltip="cecum"><div>cecum</div></a></div>
                <div class="colname cellwidth_var"><a class="rotate" tooltip-placement="right" tooltip="ileo cecal valve"><div>ileo-cecal-valve</div></a></div>
                <div class="colname cellwidth_var"><a class="rotate" tooltip-placement="right" tooltip="indication type"><div>indication-type</div></a></div>
                <div class="colname cellwidth_var"><a class="rotate" tooltip-placement="right" tooltip="infomed consent"><div>infomed-consent</div></a></div>
                <div class="colname cellwidth_var"><a class="rotate" tooltip-placement="left" tooltip="nursing report"><div>nursing-report</div></a></div>
                <div class="colname cellwidth_var"><a class="rotate" tooltip-placement="left" tooltip="no mention about preparation"><div>no-prep-adequate</div></a></div>
                <div class="colname cellwidth_var"><a class="rotate" tooltip-placement="left" tooltip="preparation not adequate"><div>not-prep-adequate</div></a></div>
                <div class="colname cellwidth_var"><a class="rotate" tooltip-placement="left" tooltip="preparation adequate"><div>yes-prep-adequate</div></a></div>
                <div class="colname cellwidth_var"><a class="rotate" tooltip-placement="left" tooltip="procedure aborted"><div>proc-aborted</div></a></div>
                <div class="colname cellwidth_var"><a class="rotate" tooltip-placement="left" tooltip="withdraw time"><div>widthdraw-time</div></a></div>
              </div>
              <div class="sidebar-separator breakline" horizontal-splitter>
                <div class="handle"></div>
              </div>
              <div id="expandtable">
                <!-- <p ng-hide="gridData" class="loading">Loading</p> -->
                <div class="divrow ng-cloak" ng-repeat="doc in gridData | filter: { id: searchQuery }">
                  <div class="divcell cellwidth_id">{{doc.id}}</div>
                   <div ng-repeat="var in variables" extra-data-tooltip="Confidence: {{doc[var].confidence}}" class="divcell cellwidth_var {{styleGridCell(doc[var].classification, doc[var].confidence)}}" ng-click="updateGrid(var, doc.id)">
                      {{classificationName[ doc[var].classification ]}}
                    </div>
                </div>
              </div>
            </div>
          </div>  
          
          <div class="sidebar-separator" horizontal-splitter>
            <div class="handle"></div>
          </div>

          <div id="sidebar-bottom">
            
            <div id="sidebar-bottom-left">
              <div class="about unselectable">Variable details: <strong>{{activeVariable}}</strong></div>
              <div class="content">
                <div id="keywords">
                  <h6>{{classificationName["positive"]}} indicators</h6>
                  <p ng-hide="variableData" class="loading">Loading</p>
                  <ol>
                    <li ng-repeat="keyword in variableData[activeVariable].topPositive" tooltip-placement="right" tooltip="Weight {{keyword.weight/100}}" class="positive" style="width:{{keyword.weight}}%;">{{keyword.term}}</li>
                  </ol>

                  <h6>{{classificationName["negative"]}} indicators</h6>
                  <p ng-hide="variableData" class="loading">Loading</p>
                  <ol>
                    <li ng-repeat="keyword in variableData[activeVariable].topNegative" tooltip-placement="right" tooltip="Weight {{keyword.weight/100}}" class="negative" style="width:{{keyword.weight}}%;">{{keyword.term}}</li>
                  </ol>
                </div>
                <div id="distribution">
                  <h6>Distribution</h6>
                  <p ng-hide="variableData" class="loading">Loading</p>
                  <d3-piechart data='pieData'></d3-piechart>
                </div>
              </div>
            </div>

            <div id="sidebar-bottom-right">
              <div class="about unselectable">Report: <strong>#{{activeDoc}}</strong></div>
              
              <div class="content">
                <h6>{{classificationName["positive"]}} indicators</h6>
                <p ng-hide="gridData" class="loading">Loading</p>
                <ol>
                  <li ng-repeat="keyword in gridData[activeDoc][activeVariable].topPositive" tooltip-placement="left" tooltip="Weight {{keyword.weight/100}}" class="positive" style="width:{{keyword.weight}}%;">{{keyword.term}}</li>
                </ol>

                <h6>{{classificationName["negative"]}} indicators</h6>
                <p ng-hide="gridData" class="loading">Loading</p>
                <ol>
                  <li ng-repeat="keyword in gridData[activeDoc][activeVariable].topNegative" tooltip-placement="left" tooltip="Weight {{keyword.weight/100}}" class="negative" style="width:{{keyword.weight}}%;">{{keyword.term}}</li>
                </ol>
              </div>

            </div>
          
          </div>
        </div>
        <div class="main">
          <div ng-controller="TabsDemoCtrl">
            <tabset>
              <tab heading="Document View">
                <div ng-if="reportExists" id="emr-report" class="report">
                  <div class="info">
                    <i class="glyphicon glyphicon-list-alt"></i>&nbsp;
                    <a href="#" tooltip-placement="bottom" tooltip="{{reportPath}}"> 
                      <strong class="file-name js-selectable-text">Report: #{{activeDoc}}</strong>
                    </a>
                    <a class="btn btn-xs btn-default pull-right" ng-href="{{reportPath}}" target="_blank"><strong>View Raw</strong></a>
                  </div>
                  <pre><highlighted-report data='reportText'></highlighted-report></pre>
                </div>
                <div ng-if="pathologyExists" id="emr-pathology" class="report">
                  <div class="info">
                    <i class="glyphicon glyphicon-list-alt"></i>&nbsp;
                    <a href="#" tooltip-placement="bottom" tooltip="{{pathologyPath}}"> 
                      <strong class="file-name js-selectable-text">Pathology: #{{activeDoc}}</strong>
                    </a>
                    <a class="btn btn-xs btn-default pull-right" ng-href="{{pathologyPath}}" target="_blank"><strong>View Raw</strong></a>
                  </div>
                  <pre><highlighted-report data='pathologyText'></highlighted-report></pre>
                </div>
                <!-- div id="pathology-report" class>
                </div> -->
              </tab>
              <tab heading="WordTree View">
                <h4>Keyword Search</h4>
                <p>[wordtree]</p>
              </tab>
              <tab>
                <tab-heading>
                  Feedback Review &nbsp;<span ng-if="numFeedback > 0" class="badge alert-info pull-right"> {{numFeedback}} </span>
                </tab-heading>
                <h4>Feedback List</h4>

              </tab>
              <tab select="alertMe()">
                <tab-heading>
                  <i class="glyphicon glyphicon-refresh"></i> Re-Train
                </tab-heading>
                <h4>Training results</h4>
              </tab>
            </tabset>
          </div>

      </div>
    </div>
  </div>

  <!-- In production use:
  <script src="//ajax.googleapis.com/ajax/libs/angularjs/x.x.x/angular.min.js"></script>
  -->
  <script src="bower_components/angular/angular.js"></script>
  <script src="bower_components/angular-route/angular-route.js"></script>
  <script src="bower_components/angular-bootstrap/ui-bootstrap-tpls.min.js"></script>
  <script src="bower_components/jquery/dist/jquery.min.js"></script>
  <script src="bower_components/d3/d3.min.js"></script>
  <script src="js/app.js"></script>
  <!-- <script src="js/services.js"></script> -->
  <script src="js/controllers.js"></script>
  <!-- <script src="js/filters.js"></script> -->
  <script src="js/directives.js"></script>
  <script src="js/report-highlight.js"></script>
  <script src="js/jquery-routines.js"></script>
</body>
</html>
